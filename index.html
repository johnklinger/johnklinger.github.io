<html>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
	Frequency (Hz): <input type="float"  value="300" id="hz1" size="3">
	<input type="float"  value="400" id="hz2" size="3">
	<input type="float"  value="300" id="hz3" size="3">
	<input type="float"  value="200" id="hz4" size="3">
	<input type="float"  value="240" id="hz5" size="3">
	<input type="float"  value="300" id="hz6" size="3">
	<input type="float"  value="360" id="hz7" size="3">
	<input type="float"  value="300" id="hz8" size="3">
	<input type="float"  value="360" id="hz9" size="3">
	<input type="float"  value="300" id="hz10" size="3">
	<br> Length (s): <input type="float" value=".5"  id="sr1">
	<br><br>
		Frequency (Hz): <input type="float"  value="200" id="2hz1" size="3">
	<input type="float"  value="200" id="2hz2" size="3">
	<input type="float"  value="200" id="2hz3" size="3">
	<input type="float"  value="240" id="2hz4" size="3">
	<input type="float"  value="240" id="2hz5" size="3">
	<input type="float"  value="240" id="2hz6" size="3">
	<input type="float"  value="300" id="2hz7" size="3">
	<input type="float"  value="300" id="2hz8" size="3">
	<input type="float"  value="180" id="2hz9" size="3">
	<input type="float"  value="180" id="2hz10" size="3">
	<br> Length (s): <input type="float" value=".5"  id="2sr1">
	
	
  <button onclick="playSineWave()">Wave</button>
  <br><canvas id="myChart" style="width:100%;max-width:700px"></canvas>
  
  
  <script>
	
const sampleRate = 44100;
var xValues = [];
var yValues = [];






function playSineWave() {
	
	//get frequency from html
	var hzs = [
	[document.getElementById("hz1").value,
	document.getElementById("hz2").value,
	document.getElementById("hz3").value,
	document.getElementById("hz4").value,
	document.getElementById("hz5").value,
	document.getElementById("hz6").value,
	document.getElementById("hz7").value,
	document.getElementById("hz8").value,
	document.getElementById("hz9").value,
	document.getElementById("hz10").value],
	[document.getElementById("2hz1").value,
	document.getElementById("2hz2").value,
	document.getElementById("2hz3").value,
	document.getElementById("2hz4").value,
	document.getElementById("2hz5").value,
	document.getElementById("2hz6").value,
	document.getElementById("2hz7").value,
	document.getElementById("2hz8").value,
	document.getElementById("2hz9").value,
	document.getElementById("2hz10").value]
	];
	
	var srs = [
	document.getElementById("sr1").value,
	document.getElementById("2sr1").value
	];
	
	
	//find longest tone length
	var longtone = 0;
	for (i = 0; i < srs.length; i++){
		if (srs[i] > longtone){
			longtone = i;
			}
		}
		
	
	//make array for sine wave, use html for length
	var sinearrays = [];
	for (i=0; i < hzs.length; i++){
		sinearrays[i] = new Float32Array(sampleRate * srs[longtone] * hzs[0].length);
	}
	
	

	var linexValues = [];
	var lineyValues = [];


	
	for (k = 0; k < hzs.length; k++){
		linexValues[k] = [];
		lineyValues[k] = [];
		for (i = 0; i < hzs[k].length; i++){
			linexValues[k].push(i*srs[k]);
			lineyValues[k].push(hzs[k][i]);
		}
	}
	
	
	for (k = 0; k < hzs.length; k++){
		for (i = 0; i < sinearrays[k].length; i++){
			j = Math.floor(i/(sampleRate * srs[k]));
	
			//populate array for buffer			
			sinearrays[k][i] = Math.sin(i * hzs[k][j] * 2 * Math.PI / sampleRate);
		
			
		}
	}

new Chart("myChart", {
  type: "line",
  data: {
	labels: linexValues[0],
    datasets: [
		{
		data: lineyValues[0]
		},
		{
		data: lineyValues[1]
		}]
  },
  options: {
    legend: {display: false},
    scales: {
      xAxes: [],
      yAxes: [],
    }
  }
});
for (i = 0; i < sinearrays.length; i++){
  playSound({ array: sinearrays[i], sampleRate });
 }
  
}

function playSound({ array, sampleRate }) {
  // We have to start with creating AudioContext
  const audioContext = new AudioContext({sampleRate});
  // create audio buffer of the same length as our array
  const audioBuffer = audioContext.createBuffer(1, array.length, sampleRate);
  // this copies our sine wave to the audio buffer
  audioBuffer.copyToChannel(array, 0);
  // some JavaScript magic to actually play the sound
  const source = audioContext.createBufferSource();
  source.connect(audioContext.destination);
  source.buffer = audioBuffer;
  source.start();
}


  </script>


</html>
