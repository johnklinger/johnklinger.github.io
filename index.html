
<html>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
	Frequency (Hz): <input type="float"  value="440" id="hz1">
	<br> Length (s): <input type="float" value="2"  id="sr1">
	
	
  <button onclick="playSineWave()">Wave</button>
  <br><canvas id="myChart" style="width:100%;max-width:700px"></canvas>
  
  
  <script>
	
const sampleRate = 44100;
const xValues = [];
const yValues = [];

//const xValues = [0,.01,.02,.03];
//const yValues = [-1,1,-1,1];


function playSound({ array, sampleRate }) {
  // We have to start with creating AudioContext
  const audioContext = new AudioContext({sampleRate});
  // create audio buffer of the same length as our array
  const audioBuffer = audioContext.createBuffer(1, array.length, sampleRate);
  // this copies our sine wave to the audio buffer
  audioBuffer.copyToChannel(array, 0);
  // some JavaScript magic to actually play the sound
  const source = audioContext.createBufferSource();
  source.connect(audioContext.destination);
  source.buffer = audioBuffer;
  source.start();
}



function playSineWave() {
	
	//get frequency from html
	var hz = document.getElementById("hz1").value;
	
	//make array for sine wave, use html for length
	var sinewavelength = document.getElementById("sr1").value;
	const sineWaveArray = new Float32Array(sampleRate * sinewavelength);
	
	for (i = 0; i < sineWaveArray.length; i++) {
  		
		//populate array for buffer			
		sineWaveArray[i] = Math.sin(i * hz / sinewavelength);
		
		//populate values for graph
		if (i < sampleRate/100){
		xValues.push(i);
		yValues.push(sineWaveArray[i]);

		}
}

new Chart("myChart", {
  type: "line",
  data: {
  labels: xValues,
    datasets: [{
      data: yValues
    }]
  },
  options: {
    legend: {display: false},
    scales: {
      xAxes: [{ticks: {min: 0, max:0.1}}],
      yAxes: [{ticks: {min: -1.5, max:1.5}}],
    }
  }
});

  playSound({ array: sineWaveArray, sampleRate });
  
}


  </script>


</html>
