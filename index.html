

<html>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
	Frequency (Hz): <input type="float"  value="300" id="hz1" size="3">
	<input type="float"  value="400" id="hz2" size="3">
	<input type="float"  value="300" id="hz3" size="3">
	<input type="float"  value="200" id="hz4" size="3">
	<input type="float"  value="240" id="hz5" size="3">
	<input type="float"  value="300" id="hz6" size="3">
	<input type="float"  value="360" id="hz7" size="3">
	<input type="float"  value="300" id="hz8" size="3">
	<input type="float"  value="360" id="hz9" size="3">
	<input type="float"  value="300" id="hz10" size="3">
	<br> Length (s): <input type="float" value=".5"  id="sr1">
	
	
  <button onclick="playSineWave()">Wave</button>
  <br><canvas id="myChart" style="width:100%;max-width:700px"></canvas>
  
  
  <script>
	
const sampleRate = 44100;
var xValues = [];
var yValues = [];



function playSound({ array, sampleRate }) {
  // We have to start with creating AudioContext
  const audioContext = new AudioContext({sampleRate});
  // create audio buffer of the same length as our array
  const audioBuffer = audioContext.createBuffer(1, array.length, sampleRate);
  // this copies our sine wave to the audio buffer
  audioBuffer.copyToChannel(array, 0);
  // some JavaScript magic to actually play the sound
  const source = audioContext.createBufferSource();
  source.connect(audioContext.destination);
  source.buffer = audioBuffer;
  source.start();
}


function playSineWave() {
	
	//get frequency from html
	var hzs = [];
	hzs[0] = document.getElementById("hz1").value;
	hzs[1] = document.getElementById("hz2").value;
	hzs[2] = document.getElementById("hz3").value;
	hzs[3] = document.getElementById("hz4").value;
	hzs[4] = document.getElementById("hz5").value;
	hzs[5] = document.getElementById("hz6").value;
	hzs[6] = document.getElementById("hz7").value;
	hzs[7] = document.getElementById("hz8").value;
	hzs[8] = document.getElementById("hz9").value;
	hzs[9] = document.getElementById("hz10").value;
	
	//make array for sine wave, use html for length
	var sinewavelength = document.getElementById("sr1").value;
	const sineWaveArray = new Float32Array(sampleRate * sinewavelength * hzs.length);
	
	wavexValues = [];
	waveyValues = [];
	linexValues = [];
	lineyValues = [];
	
	
	for (i = 0; i < hzs.length; i++){
	linexValues.push(i);
	lineyValues.push(hzs[i]);
	}
	
	
	for (i = 0; i < sineWaveArray.length; i++){
		j = Math.floor(i/(sampleRate * sinewavelength));
	
		//populate array for buffer			
		sineWaveArray[i] = Math.sin(i * hzs[j] * 2 * Math.PI / sampleRate);
		
		//populate values for graph
		
		if (i < sampleRate/100){
		xValues.push(i);
		yValues.push(sineWaveArray[i]);

		}
}

new Chart("myChart", {
  type: "line",
  data: {
  labels: linexValues,
    datasets: [{
      data: lineyValues
    }]
  },
  options: {
    legend: {display: false},
    scales: {
      xAxes: [],
      yAxes: [],
    }
  }
});

  playSound({ array: sineWaveArray, sampleRate });
  
}


  </script>


</html>

